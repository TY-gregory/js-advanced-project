document.querySelector("#btn").addEventListener("click",(async function(){try{let e=document.getElementById("city").value.toLowerCase().replace(" ","-");console.log(e),function(){if(document.contains(document.getElementById("ris")))for(document.getElementById("ris").remove(),document.contains(document.getElementById("totScore"))&&document.getElementById("totScore").remove(),document.contains(document.getElementById("graph"))&&document.getElementById("graph").remove(),i=0;i<20;i++)document.contains(document.getElementById("ris"+i))&&document.getElementById("ris"+i).remove()}(),await fetch("https://api.teleport.org/api/urban_areas/slug:"+e+"/scores/").then((e=>e.json())).then((e=>{let t=e;console.log(t);var o=document.createElement("canvas");o.id="graph",o.className="tab",o.width=400,o.height=90,document.body.appendChild(o),(n=document.createElement("div")).id="ris",n.className="score",n.innerHTML+=t.summary,n.innerHTML+="Total Score : "+Math.round(100*t.teleport_city_score)/100,document.body.appendChild(n),x=Array(t.categories.length),y=Array(t.categories.length);for(let e=0;e<t.categories.length;e++){var n;x[e]=t.categories[e].name,y[e]=t.categories[e].score_out_of_10,(n=document.createElement("div")).id="ris"+e,n.className="score",n.innerHTML+=t.categories[e].name+" : "+`${Math.round(t.categories[e].score_out_of_10)}/10`,document.body.appendChild(n)}!function(e,t){const o=document.getElementById("graph").getContext("2d");new Chart(o,{type:"bar",data:{labels:e,datasets:[{label:"Scores",data:t,backgroundColor:["#FF3E96","#00FFFF","#40E0D0","#FF6103","#00FF00","#FFD700","#FF00FF","#DC143C","#4B0082","#2F4F4F","#F5F5DC","#DCDCDC","#228B22","#FFFF00","#800080","#BC8F8F","#D2691E"],borderColor:["#000000"],borderWidth:1}]}})}(x,y)}))}catch(e){if(!e.ok||e.status>=404)throw Error(alert(" PLEASE INSERT A CORRECT CITY"));return e.json()}}));